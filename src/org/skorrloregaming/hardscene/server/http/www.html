<!-- Code developed by SkorrloreGaming-Productions -->
<html>
	<head>
		<title>HardScene</title>
		<style>
			pre {
				white-space: pre-wrap;
				white-space: -moz-pre-wrap;
				white-space: -pre-wrap;
				white-space: -o-pre-wrap;
				word-wrap: break-word;
			}
			.centered {
				position: fixed;
				top: 50%;
				left: 50%;
			}
			iframe {
				width: 750px;
				height: 450px;
				border: 1px solid black;
			}
			body {
				background-color: white;
		    	-webkit-background-size: cover;
		    	-moz-background-size: cover;
		    	-o-background-size: cover;
		    	background-size: cover;
		    }
			.bottom {
				position: fixed;
				bottom: 0px;
				width: 100%;
			}
			a {
				text-decoration: none;
				color: blue;
			}
			a:hover {
				color: brown;
			}
		</style>
		<script>
			var socket = null;
			var fade = function(element) {
				var op = 1;
				var timer = setInterval(function () {
					if (op <= 0.1){
						clearInterval(timer);
						element.style.display = 'none';
					}
					element.style.opacity = op;
					element.style.filter = 'alpha(opacity=' + op * 100 + ")";
					op -= op * 0.1;
				}, 50);
			}
			var unfade = function(element) {
			    var op = 0.1;
			    element.style.display = 'block';
			    var timer = setInterval(function () {
			   		if (op >= 1){
			    		clearInterval(timer);
			    	}
			    	selement.style.opacity = op;
			    	element.style.filter = 'alpha(opacity=' + op * 100 + ")";
			    	op += op * 0.1;
			    }, 10);
			}
			var connect = function() {
				socket = new WebSocket('ws://' + location.host + '/websocket');
				socket.onopen = function(event) {
					var message = document.createElement('pre');
					message.innerHTML = 'Connected.<br/>';
					document.getElementById('messageHistory').appendChild(message);
					setTimeout(function() { socket.send(name + '~!' + token); }, 200);
				};
				socket.onmessage = function(event) {
					var isNearBottom = false;
					if ((window.innerHeight + window.pageYOffset) >= document.body.offsetHeight - 100) isNearBottom = true;
					var message = document.createElement('pre');
					message.innerHTML = event.data;
					document.getElementById('messageHistory').appendChild(message);
					if (isNearBottom) document.body.scrollTop = document.body.scrollHeight - document.body.clientHeight;
				};
				socket.onclose = function(event) {
					setTimeout(function() { window.location = window.location.href; }, 1000);
				};
			}
			var load = function() {
				if (typeof name !== 'undefined' && typeof token !== 'undefined') {
					var letterNumber = /^[0-9a-zA-Z]+$/;
					if (name.length > 3 && name.length < 15) {
						if (name.split("_").join("").match(letterNumber)) {
							document.body.style.backgroundColor = "white";
							document.body.style.margin = '0';
							document.getElementById('loginPanel').style.display = 'none';
							document.getElementById('perform').style.display = 'block';
							connect();
							return;
						}
						alert('Invalid display name syntax, please try again.');
						return;
					}
					alert('Please specify a name with a length between 4 and 16.');
				}
			}
			var keypress = function(event) {
				var key = event.which || event.keyCode;
				document.body.scrollTop = document.body.scrollHeight - document.body.clientHeight;
				if (key == 13) {
					var message = document.getElementById('messageBox').value;
					if (message.length > 256) {
						message = message.substring(0, 256);
					}
				   	if (message.length > 0) {
				   		socket.send(name + ': ' + message);
						document.getElementById('messageBox').value = '';
				   	}
				   	return false;
				}
			}
		</script>
	</head>
	<body onload="load();">
		<div id="loginPanel" name="loginPanel">
			<center>
			<div class="centered" style="height: 400px; width: 450px; border-radius: 5px; background-color: white; margin-top: -200px; margin-left: -225px;" id="subLoginPanel" name="subLoginPanel">
				<br/><br/>
				<h2>HardScene-Client</h2><br/>
				<form method="post" action="">
				<p><input style="width: 200px; border-radius: 5px;" type="text" id="name" name="name" value="" placeholder="Display Name"></p>
				<p><input style="width: 200px; border-radius: 5px;" type="password" id="name" name="token" value="" placeholder="Auth Token"></p>
				<p class="submit"><input style="width: 200px; height: 30px;" type="submit" name="commit" value="Login"></p>
				</form>
				<br/>
				<p>Developed by SkorrloreGaming-Productions</p>
			</div>
			</center>
		</div>
		<div id="perform" name="perform" style="display: none;">
			<div style="background-color: white; padding-left: 5px; padding-right: 5px; padding-top: 5px; padding-bottom: 5px;" id="connection" name="connection">
				<center style="padding-top: 15px;">
					<a href="/">Disconnect</a> / <a href="#" onclick="document.getElementById('messageHistory').innerHTML = ''; return false;">Clear History</a>
				</center>
				<div id="messageHistory" name="messageHistory" style="width: 100%; padding-left: 10px; word-wrap: normal; overflow: hidden; padding-right: 10px; padding-top: 5px; padding-bottom: 5px;">
					<pre>Connecting..</pre>
				</div>
				<div id="controls" name="controls">
					<center>
						<form action="return javascript.void(0);" autocomplete="off">
							<input style="width: 95%; border-radius: 5px;" type="text" id="messageBox" name="messageBox" onkeydown="return keypress(event);">
						</form>
					</center>
				</div>
			</div>
		</div>
	</body>
</html>